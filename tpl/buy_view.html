<!--// HEADER -->
<load target="../../../common/js/plugins/ui/jquery-ui.min.css" />
<load target="../../../common/js/plugins/ui/jquery-ui.js" />

<include target="_header.html" />

<!--TODO-->
<div cond="$XE_VALIDATOR_MESSAGE && $XE_VALIDATOR_ID == ''" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>

<h2>{$lang->stkr_buy_info}</h2>

<form action="./" method="post" style="margin:0 0 25px 0;">
<input type="hidden" name="module" value="{$module}">
<input type="hidden" name="act" value="procStickerAdminBuyUpdate">
<input type="hidden" name="idx" value="{$oBuyInfo->idx}">

<table class="x_table x_table-striped x_table-hover" style="margin:0 0 15px 0;">
<colgroup><col width="120">
</colgroup><tbody><tr>
<th scope="col" class="nowr">{$lang->stkr_buyer_nick_name}</th>
<td><a href="#popup_menu_area" class="member_{$oBuyInfo->member_srl}" onclick="return false">{$oBuyInfo->nick_name}</a>
</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_log_sticker_srl}</th>
	<td><span>{$oBuyInfo->sticker_srl}</span></td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_sticker_title}</th>
	<td><img src="{$oSticker->main_image}" style="width:50px; height:50px; object-fit:cover; margin:0 5px 0 0;">
		<a href="{getUrl('','mid', 'sticker', 'sticker_srl', $oSticker->sticker_srl)}" target="_blank"><span>{$oSticker->title}</span></a></td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->ipaddress}</th>
	<td>{$oBuyInfo->ipaddress}</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_buy_date}</th>
	<td>
		<span>{zdate($oBuyInfo->regdate, 'Y-m-d H:i:s')}</span>
	</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_expire_date}</th>
	<td>
		<input type="hidden" name="expdate" id="expdate" value="{$oBuyInfo->expdate ? zdate($oBuyInfo->expdate, 'Ymd') : ''}" />
		<input type="text" readonly placeholder="YYYY-MM-DD" class="inputDate" id="expdate_e" value="{$oBuyInfo->expdate ? zdate($oBuyInfo->expdate, 'Y-m-d') : ''}" />
		<input type="button" value="{$lang->cmd_delete}" class="x_btn dateRemover" />

		<div style="margin: 10px 0 0 0">
			<label class="x_inline" for="expdate_hour">
			<input type="number" value="{$oBuyInfo->expdate ? zdate($oBuyInfo->expdate, 'H') : '23'}" name="expdate_hour" id="expdate_hour"> {$lang->stkr_hour}</label>

			<label class="x_inline" for="expdate_minute">
			<input type="number" value="{$oBuyInfo->expdate ? zdate($oBuyInfo->expdate, 'i') : '59'}" name="expdate_minute" id="expdate_minute"> {$lang->stkr_minute}</label>

			<label class="x_inline" for="expdate_second">
			<input type="number" value="{$oBuyInfo->expdate ? zdate($oBuyInfo->expdate, 's') : '59'}" name="expdate_second" id="expdate_second"> {$lang->stkr_second}</label>
		</div>
		<!--@if($oBuyInfo->expdate)-->
			{zdate($oBuyInfo->expdate, 'Y-m-d H:i:s')}
		<!--@else-->
			{$lang->stkr_expire_date_not_set}
		<!--@end-->
	</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_used_point}</th>
	<td>
		<input type="number" value="{$oBuyInfo->use_point}" name="use_point" id="use_point" style="width:70px;">
	</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->stkr_used_count}</th>
	<td>
		<input type="number" value="{$oBuyInfo->used_count}" name="used_count" id="used_count" style="width:70px;">
		<label class="x_inline" for="used_count_e" style="margin: 0 0 0 4px;">
			{$lang->cmd_modify}
			<input type="checkbox" value="Y" id="used_count_e" name="used_count_e">
		</label>
	</td>
</tr>
<tr>
	<th scope="col" class="nowr">{$lang->status}</th>
{@
	$oBuyInfo->expdate = intval($oBuyInfo->expdate);
}
	<td>
		{!$oBuyInfo->expdate || ($oBuyInfo->expdate && $date < $oBuyInfo->expdate) ? $lang->stkr_valid : $lang->stkr_expired}
	</td>
</tr>

</tbody>
</table>

<div class="x_pull-left">
	<button class="x_btn" type="button" onclick="history.go(-1)">{$lang->cmd_list}</button>
</div>
<div class="x_pull-right">
	<button type="submit" name="act" class="x_btn" value="procStickerAdminBuyDelete">{$lang->cmd_delete}</button>
	<button type="submit" class="x_btn x_btn-primary" style="width:120px;" value="false">{$lang->cmd_modify}</button>
</div>

</form>

<script>
(function($){
	$(function(){
		var option = { changeMonth: true, changeYear: true, gotoCurrent: false,yearRange:'-100:+10', dateFormat:'yy-mm-dd', onSelect:function(){
			$(this).prev('input[type="hidden"]').val(this.value.replace(/-/g,""))}
		};
		$.extend(option,$.datepicker.regional['{$lang_type}']);
		$(".inputDate").datepicker(option);
		$(".dateRemover").click(function() {
			$(this).prevAll('input').val('');
			$(this).parent().find('div input').val('0');
			return false;
		});
    });
})(jQuery);
</script>
